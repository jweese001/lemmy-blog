{{ define "main" }}
<div class="home-header">
  <h1 class="home-title">{{ .Site.Title }}</h1>
  <p class="home-subtitle">{{ .Site.Params.description }}</p>
</div>

{{ if .Site.Params.topics }}
<div class="topics-list">
  {{ range .Site.Params.topics }}
  <a href="{{ printf "/tags/%s" (. | urlize) | relURL }}" class="topic-tag">{{ . }}</a>
  {{ end }}
</div>
{{ end }}

<section>
  <h2 class="section-title">Latest Posts</h2>
  <ul class="post-list">
    {{ range first 10 (where .Site.RegularPages "Section" "posts") }}
    <li class="post-item">
      <a href="{{ .Permalink }}" class="post-link">
        <article class="post-card">
          {{ with .Params.image }}
          <img src="{{ . | relURL }}" alt="{{ $.Title }}" class="post-image">
          {{ else }}
          <div class="post-image"></div>
          {{ end }}
          <div class="post-content">
            <h3 class="post-title">{{ .Title }}</h3>
            <p class="post-excerpt">{{ .Summary | plainify | truncate 160 }}</p>
            <div class="post-meta">
              <span class="post-date">{{ .Date.Format "Jan 2, 2006" }}</span>
              {{ with .Params.tags }}
              <div class="post-tags">
                {{ range first 2 . }}
                <span class="tag">{{ . }}</span>
                {{ end }}
              </div>
              {{ end }}
            </div>
          </div>
        </article>
      </a>
    </li>
    {{ end }}
  </ul>
</section>
{{ end }}
